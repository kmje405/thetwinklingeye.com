---
import Layout from "../layouts/Layout.astro";
import AboutCard from "../components/AboutCard.astro";
import { client, queries } from "../lib/sanity";
import type { SiteSettings } from "../types/sanity";

// Fetch site settings data
const siteSettings: SiteSettings = await client.fetch(queries.siteSettings);
const siteOwner = siteSettings?.siteOwner;
---

<Layout>
  <div class="page-content">
    {
      siteOwner ? (
        <AboutCard
          name={siteOwner.name}
          callout={siteOwner.callout}
          bio={siteOwner.bio}
          image={siteOwner.image}
        />
      ) : (
        <div class="fallback-content">
          <h1>About</h1>
          <p>
            Site owner information not available. Please configure it in Sanity
            Studio.
          </p>
        </div>
      )
    }
  </div>
</Layout>

<style>
  .page-content {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 0 1rem;
  }

  .fallback-content {
    text-align: center;
  }

  .fallback-content h1 {
    font-size: 3rem;
    color: #2c3e50;
    margin-bottom: 1rem;
  }

  .fallback-content p {
    font-size: 1.1rem;
    color: #666;
    line-height: 1.6;
  }

  @media (max-width: 768px) {
    .page-content {
      padding: 0 0.5rem;
    }
  }
</style>
